# ==================================================================
#                 kitty.conf for Starship & macOS
# ==================================================================

# ------------------------------------------------------------------
# 1. THEME & FONT
# ------------------------------------------------------------------

include dracula.conf

# Font configuration for Starship, with Nerd Font icons and ligatures.
font_family         FiraCode Nerd Font Mono
font_size           14.0
bold_font           auto
italic_font         auto
bold_italic_font    auto
disable_ligatures   never

# ------------------------------------------------------------------
# 2. AESTHETICS & LAYOUT
# ------------------------------------------------------------------

# Padding around the text for a clean look.
window_padding_width 12

# macOS background blur and window transparency.
macos_background_blur 30
background_opacity 0.90

# Hides the title bar for a minimal look.
hide_window_decorations titlebar-only

# Minimal window borders with a Dracula accent color for the active window.
draw_minimal_borders yes
window_border_width 1.0
active_border_color #bd93f9

# ------------------------------------------------------------------
# 3. CURSOR
# ------------------------------------------------------------------

# A beam shape is less intrusive than a block.
cursor_shape beam

# The interval to blink the cursor (in seconds). Negative values use system default.
cursor_blink_interval -1

# Stop blinking cursor after 15.0 seconds of keyboard inactivity. [cite: 99, 100]
cursor_stop_blinking_after 15.0

# Make the beam cursor slightly thicker for better visibility.
cursor_beam_thickness 1.5

# Use the cell's background color for text under the cursor.
cursor_text_color background

# ------------------------------------------------------------------
# 4. MACOS & SHELL INTEGRATION
# ------------------------------------------------------------------

# Use the Command (⌘) key for shortcuts.
kitty_mod cmd

# Allow the Option (⌥) key to act as Meta in the shell.
macos_option_as_alt yes

# Match the titlebar color to the background for a seamless look.
macos_titlebar_color background

# On macOS, the app will stay running even when the last window is closed.
macos_quit_when_last_window_closed no

# Enable shell integration for features like jumping between prompts.
shell_integration enabled

# ------------------------------------------------------------------
# 5. USABILITY & TWEAKS
# ------------------------------------------------------------------

# Number of lines to keep in scrollback.
scrollback_lines 10000

# Copy to clipboard when text is selected.
copy_on_select yes

# URL style and handling.
url_style single
open_url_with default

# ------------------------------------------------------------------
# 6. CUSTOM TAB BAR (Dracula Themed)
# ------------------------------------------------------------------
# A custom tab bar that appears at the bottom and matches the Dracula theme.
# It will only be visible when you have 2 or more tabs.

tab_bar_edge bottom
tab_bar_style fade
tab_bar_min_tabs 2
inactive_tab_foreground #282a36
inactive_tab_background #6272a4
active_tab_foreground   #282a36
active_tab_background   #f8f8f2

# ------------------------------------------------------------------
# 7. KEYBOARD SHORTCUTS (macOS Style)
# ------------------------------------------------------------------

# --- Clipboard ---
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard

# --- Window Management ---
map cmd+enter new_window
map cmd+n     new_os_window
map cmd+w     close_window

# Move focus to adjacent windows
map cmd+alt+left  previous_window
map cmd+alt+right next_window

# Start resizing a window
map cmd+r start_resizing_window

# --- Tab Management ---
map cmd+t new_tab
map cmd+q close_tab
map cmd+right next_tab
map cmd+left  previous_tab

# --- Font Size ---
map cmd+equal     change_font_size all +1.0
map cmd+minus     change_font_size all -1.0
map cmd+0         change_font_size all 0

# --- Scrolling ---
map cmd+k         scroll_line_up
map cmd+j         scroll_line_down
map cmd+home      scroll_home
map cmd+end       scroll_end

# --- Miscellaneous ---
map cmd+f2        edit_config_file
map cmd+delete    clear_terminal reset active

# Browse the output of the last command in a pager (needs shell integration)
map cmd+g show_last_command_output
